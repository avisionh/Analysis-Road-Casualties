---
title: 'Analysis: Road Casualties - Camden'
author: "[Avision Ho](https://github.com/avisionh)"
date: "`r Sys.Date()`"
output: 
  html_document:
    number_sections: false
    theme: journal
    highlight: haddock
    code_folding: hide
    fig_caption: true
    toc: true
    toc_float: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(results = "asis", warning = FALSE, message = FALSE)

# Load packages
library(dplyr)
library(ggplot2)

# Turn off scientific notation
options(scipen = 999, expressions = 10000)

# Set theme for plots
plot_theme <- theme(plot.title = element_text(face = "bold", hjust = 0.5),
                    plot.subtitle = element_text(face = "bold", hjust = 0.5),
                    panel.background = element_blank(),
                    axis.line = element_line(color = "black"))

```

# Section 1: Executive Summary

# Section 2: Background

## Introduction
The purpose of this project is to explore the road casualty data publicly available for the London borough of Camden.

## Motivation
By exploring the data, we hope to identify and understand the following:

1. **Who** are most involved in road casualties

1. **What** types of casualties are most frequent, including their severity

1. **When** these casualties often occur 

1. **Where** road casualties take place

1. **How** these casualties take place, including weather conditions

The idea behind this exploratory analysis is to provide the platform for a classification model to be built to better understand who, what, when, where and how these casualties take place so more effective campaigns can be delivered by the local council to reduce casualties as well as identifying *hotspots* for where casualties most likely happen so that work such as building works to improve the roads, can be done by the council.

## Data
The data comes from the data.gov.uk website [here](https://data.gov.uk/dataset/f36669c1-fe1f-4cbc-803c-db49675247c3/road-collision-casualties-in-camden).

Note, as this is published to the public and from inspection, this data is already in a *tidy* format so little wrangling needs to be done.
```{r (HIDE) Data Preparation, echo = FALSE, include = FALSE}
source("scripts/0_data_wrangle.R")
```

## Section 3: Analysis

### Who are most involved in road casualties?
We will begin by exploring the charateristics of those people who were involved in road casualties.

```{r (SHOW) Who are involved, echo = FALSE}
plot_base <- ggplot(data = data_casualty, mapping = aes(x = ModeOfTravel, fill = CasualtySex)) +
  labs(x = "Mode of Travel") +
  plot_theme +
  # add text-wrapping for x labels
  scale_x_discrete(labels = function(x) str_wrap(x, width = 10))
```

From the bar-chart below, we see that *men* are involved in casualties relating to *Powered 2-wheeler* whereas *women* are involved in casualties

```{r (SHOW) Who are involved - mode of travel, echo = FALSE}
plot_base +
  geom_bar(position = position_dodge()) +
  labs(title = "Bar-Chart: Count of Road Casualties", 
       subtitle = "by Mode of Travel and Sex",
       y = "Count of casualties")
```

Let's drill-down further as we have age related information in the dataset.

What we see in the box-plot is that for *fatal* casualties, they tend to be male who are younger than their female counterparts, on average. Yet the range of peoplee involved in a *fatal* road casualty has increased from youth not having.

```{r (SHOW) Who are involved - age, echo = FALSE}
ggplot(data = data_casualty, mapping = aes(x = CasualtySeverity, y = CasualtyAge, fill = CasualtySex)) +
  geom_boxplot() +
  labs(title = "Box-Plot: Severity of Casualty by Age",
       x = "Severity of Casualty",
       y = "Age of person involved in casualty") + 
  plot_theme
```

### What types of casualties are most frequent?

